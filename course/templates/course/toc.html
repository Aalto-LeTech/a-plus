{% extends "course/course_base.html" %}
{% load i18n %}
{% load course %}
{% load apps %}

{% block coursecontent %}
<div class="row">
    <div class="span7">
        <h2>{% trans "Table of contents" %}</h2>
        <ul>
            {% for module in instance.course_modules.all %}
            {% if module.chapters.exists or module.learning_objects.exists %}
            {% with open=module.is_after_open %}
            <li>
                <h3>
                    {% if open %}
                    <a href="{{ module|url }}">
                    {% endif %}
                        {{ module }}
                        <small>{{ module.opening_time }} &ndash; {{ module.closing_time }}</span>
                    {% if open %}
                    </a>
                    {% endif %}
                </h3>
                <ul class="chapters">
                    {% for chapter in module.chapters.all %}
                    {% if open %}
                    <li>
                        <a href="{{ chapter|url }}">
                            {{ chapter }}
                        </a>
                    </li>
                    {% else %}
                    <li>{{ chapter }}</li>
                    {% endif %}
                    {% endfor %}
                </ul>
                {% if not module.chapters.exists %}
                <ul class="exercises">
                    {% for exercise in module.learning_objects.all %}
                    {% if open %}
                    <li>
                        <a href="{{ exercise|url }}">
                            {{ exercise }}
                        </a>
                    </li>
                    {% else %}
                    <li>{{ exercise }}</li>
                    {% endif %}
                    {% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endwith %}
            {% endif %}
            {% endfor %}
        </ul>
    </div>
    <div class="span3">
        {% plugin_renderers user instance as plugins %}
        {% for plugin in plugins %}
            {{ plugin.render|safe }}
        {% endfor %}
    </div>
</div>
{% endblock %}
