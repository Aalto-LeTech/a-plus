{% extends "course/course_base.html" %}
{% load i18n %}
{% load course %}
{% load apps %}

{% block view_tag %}home{% endblock %}

{% block coursecontent %}
<ul>
    {% for module in instance.course_modules.all %}
    {% if module.chapters.exists or module.learning_objects.exists %}
    {% with open=module.is_after_open %}
    <li>
        <h3>
            {% if open %}
            <a href="{{ module|url }}">{{ module }}</a>
            {% else %}
            {{ module }}
            {% if is_course_staff %}
            <a class="btn btn-default btn-xs" href="{{ module|url }}">{% trans "Staff access" %}</a>
            {% endif %}
            {% endif %}
        </h3>
        <p>
            <small>{{ module.opening_time }} &ndash; {{ module.closing_time }}</small>
        </p>
        <ul class="chapters">
            {% for chapter in module.chapters.all %}
            <li>
                {% if open %}
                <a href="{{ chapter|url }}">{{ chapter }}</a>
                {% else %}
                {{ chapter }}
                {% if is_course_staff %}
                <a class="btn btn-default btn-xs" href="{{ chapter|url }}">{% trans "Staff access" %}</a>
                {% endif %}
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        {% if not module.chapters.exists %}
        <ul class="exercises">
            {% for exercise in module.learning_objects.all %}
            <li>
                {% if open %}
                <a href="{{ exercise|url }}">{{ exercise }}</a>
                {% else %}
                {{ exercise }}
                {% if is_course_staff %}
                <a class="btn btn-default btn-xs" href="{{ exercise|url }}">{% trans "Staff access" %}</a>
                {% endif %}
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        {% endif %}
    </li>
    {% endwith %}
    {% endif %}
    {% endfor %}
</ul>
{% endblock %}

{% block sidecontent %}
    {% plugin_renderers user instance as plugins %}
    {% for plugin in plugins %}
        {{ plugin.render|safe }}
    {% endfor %}
{% endblock %}
